<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title></title>
    <link rel="stylesheet" href="../css/style.css" />
    <meta name="description" content="" />

    <meta property="og:title" content="" />
    <meta property="og:type" content="" />
    <meta property="og:url" content="" />
    <meta property="og:image" content="" />
    <meta property="og:image:alt" content="" />

    <link rel="icon" href="/favicon.ico" sizes="any" />
    <link rel="icon" href="/icon.svg" type="image/svg+xml" />
    <link rel="apple-touch-icon" href="icon.png" />

    <link rel="manifest" href="../site.webmanifest" />
    <meta name="theme-color" content="#fafafa" />
  </head>

  <body>
    <h1>Ejercicio Anotador</h1>
    <ul>
      <li><a href="../index.html">Volver</a></li>
    </ul>
    <script>
      /*
       ## Agenda con Tareas

      ### Tarea
      - **Propiedades**
        - id (string)
        - descripcion (string)
        - categoria (string)
        - vencimiento (Date)
        - finalizada (booleano), inicializa en `false`
      - **Constructor**
        - toma como argumentos `descripcion`, `categoria`, `vencimiento` y los asigna a sus propiedades
        - genera un `id` automático y lo asigna a su propiedad
      - **Métodos**
        - **`finalizar()`** cambia `finalizada` a `true`
        - getters para obtener los valores de todas las propiedades

      ### Agenda
      - **Propiedades**
        - tareas (array de `Tarea`), inicializa vacío
      - **Métodos**
          - **`agregar(tarea)`** agrega `tarea` a `tareas`
          - **`eliminar(id)`** elimina de `tareas` la tarea con `id`
          - **`finalizar(id)`** finaliza la `Tarea` con `id`
          - **`obtener(id)`** devuelve la tarea con `id`
          - **`obtenerTodas()`** devuelve un array con todas las tareas
          - **`filtrarActivas()`** devuelve un array de tareas que no estén finalizadas
          - **`filtrarFinalizadas()`** devuelve un array de tareas que estén finalizadas
          - **`filtrarPorCategoria(categoria)`** devuelve un array de tareas que tenga `categoria`
          - **`filtrarPorVencimiento(fecha)`** devuelve un array de tareas que tenga vencimiento en `fecha`
        */
      class Tarea {
        #id;
        #descripcion;
        #categoria;
        #vencimiento;
        #finalizada;
        constructor(descripcion, categoria, vencimiento) {
          this.#id = crypto.randomUUID();
          this.#descripcion = descripcion;
          this.#categoria = categoria;
          this.#vencimiento = vencimiento;
          this.#finalizada = false;
        }
        getId() {
          return this.#id;
        }
        getDescripcion() {
          return this.#descripcion;
        }
        getCategoria() {
          return this.#categoria;
        }
        getVencimiento() {
          return this.#vencimiento;
        }
        getFinalizada() {
          return this.#finalizada;
        }
        setFinalizar() {
          this.#finalizada = true;
        }
      }

      class Agenda {
        constructor() {
          this.tareas = [];
        }
        agregarTarea(tarea) {
          this.tareas.push(tarea);
        }
        eliminarTarea(id) {
          const index = this.tareas.findIndex((tarea) => tarea.getId() === id);
          if (index !== -1) {
            this.tareas.splice(index, 1);
          } else {
            console.warn(`La tarea con id ${id} no ha sido encontrada`);
          }
        }
        finalizarTarea(id) {
          const tarea = this.tareas.find((tarea) => tarea.getId() === id);
          if (tarea) {
            tarea.setFinalizar();
          } else {
            console.warn("Tarea no encontrada");
          }
        }
        obtenerTarea(id) {
          return this.tareas.find((tarea) => tarea.getId() === id || null);
        }
        obtenerTodasTarea() {
          return this.tareas;
        }
        filtrarActivas() {
          return this.tareas.filter((tarea) => tarea.getFinalizada() === false);
        }
        filtrarFinalizadas() {
          return this.tareas.filter((tarea) => tarea.getFinalizada() === true);
        }
        filtrarPorCategoria(categoria) {
          return this.tareas.filter(
            (tarea) => tarea.getCategoria() === categoria
          );
        }
        filtrarPorFecha(fecha) {
          return this.tareas.filter(
            (tarea) =>
              new Date(tarea.getVencimiento()).toDateString() ===
              new Date(fecha).toDateString()
          );
        }
      }
      const tarea1 = new Tarea("Toma de muestras", "Trabajo", "2025-09-05");
      const tarea2 = new Tarea("Renovar DNI", "Personal", "2025-09-05");
      const tarea3 = new Tarea("Revisar trampas", "Trabajo", "2025-09-06");

      const agenda = new Agenda();
      agenda.agregarTarea(tarea1);
      agenda.agregarTarea(tarea2);
      agenda.agregarTarea(tarea3);
      agenda.finalizarTarea(tarea2.getId());
      console.log(agenda.obtenerTarea(tarea1.getId()));
      console.log(agenda.filtrarPorFecha("2025-09-05"));
    </script>
  </body>
</html>
